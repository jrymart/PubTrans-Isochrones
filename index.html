<html>
  <head>
    <title>PubTrans Isochrones</title>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css"/>
     <link rel="stylesheet" href="styles.css">
     <script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>
     <script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
     <script src="https://unpkg.com/@mapbox/geojsonhint@latest/geojsonhint.js"></script>
     <script>
      var bbox = turf.bbox(features);
     </script>
     <script src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDzme8L5zUARdCqdW-y85mKz8p012GEiGE&callback=initMap"></script>
  </head>
  <body>
     <h1>
       Mapping Public Transit Access
    </h1>
     <div id="mapid"></div>
    <script src="bundle.js"></script>
    <div id="make" style="display: none">
      <input type="text" id="lname" name="lname" placeholder="Layer Name">
      <button type="button" id="submit">Submit</button>
      <button type="button" id="cancel">Cancel</button>
    </div>
    <div id="warning" style="display: none">
      <div style="margin-top: 10px">Please Read Final Paragraph<br></div>
      <button id="bad">OK</button>
    </div>
    <div id="apiProgress" style="display: none">
      <div id="bar"></div>
      <div id="barText"></div>
    </div>
    <div id="bodytext">
      <p>
      <a href="https://en.wikipedia.org/wiki/Isochrone_map">Isochrone maps</a> have been used to 
        visualize travel times for centuries, and are an intuitive tool for visualizing access.  
        Simply put, an isochrone map shows the travel time from a single point, usually with colors 
        drawn on to indicate a specific time range.  A well done isochrone map gives the viewer an 
        idea of travel times across a whole area, be it a city, country or the globe, at a single 
        glance.  Traditional static isochone maps, while powerful, are limited in scope in that they 
        focus on access to a single point.  Often, that's enough.  If one is interested in understanding 
        access to a single important feature of interest, like an airport, or a new development, a 
        traditional isochrone map does that splendidly.  Even if you are interested in understanding the 
        transportation network as a whole, an isochrone map centered on a major transport hub can do 
        that.  However, with dynamic web mapping, and incredibly detailed transit planning software, we 
        can do better.      
      </p>
      <p>
        This map uses <a href="http://leafletjs.com/">Leaflet</a> to get a desired center point, queries 
        the <a href="https://developers.google.com/maps/documentation/directions/">Google Maps Directions API</a> 
        to get estimated transit times for points in a grid around the center point, and then uses 
        <a href="http://turfjs.org/">Turf.js</a> to interpolate the isochrones from the grid of 
        transit times.  This is then displayed to the user on the Leaflet map.  It is the authors hope 
        that a dynamic public transit isochrone map, users can better understand their transit system 
        in a way that is meaningful to them, by looking at service surrounding their homes, workplaces, 
        and other destinations of interest.
      </p>
      <h2>
        Some nitty-gritty:  
      </h2>
      <p>
        First off, transit travel time varrys dramiticaly depending on when you leave.  
        A 20 minute bus ride could mean a 40 minute (or more!) if the buses come every 30 minutes.  
        Transit lines shutdown, and change frequency throughout the day.  If this was not taken into account, 
        one might get dramatically different results if an isochrone was generated at 11 AM on a weekday, as 
        opposed to 3 in the morning on a Sunday.  To address this, all isochrone maps are generated based 
        of departure times of 9 AM (users time zone) on the following Wednesday.  While the author 
        hopes this yields generally good results, it both limits the scope of the maps and could produce 
        wonly maps, if say the user is in a drastically different time-zone than the area they are inquiring 
        about.  Both pulling time-zone information from the area of interest and allowing custom departure times 
        are both features to be added.
      </p>
      <p>
        Secondly, the Google API introduces some limitations requiring some good faith among users.  
        Generating a new isochrones involves acquisition of a lot of new data.  Limits on the number 
        and frequency of API calls limit the speed, detail, as well as number of maps that can be 
        generated by this site.  To address this, both the customization of grid sizing and detail, 
        as well as the saving of generated maps server side for reuse both between sessions and users 
        are features to be added.  Until then, I ask that you keep these limits in mind when generating 
        maps.
      </p>
      <label>
        <input id="checkbox" type="checkbox">
        <span></span>
        I will be thoughtful when generating isochrones.
      </label>
    </div>

  </body>
</html>